/**
 * skylark-jquery-treetable - A version of jquery-treetable that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jquery-treetable/
 * @license MIT
 */
!function(t,e){var r=e.define,require=e.require,n="function"==typeof r&&r.amd,i=!n&&"undefined"!=typeof exports;if(!n&&!r){var s={};r=e.define=function(t,e,r){"function"==typeof r?(s[t]={factory:r,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var r=e.split("/"),n=t.split("/");r.pop();for(var i=0;i<n.length;i++)"."!=n[i]&&(".."==n[i]?r.pop():r.push(n[i]));return r.join("/")}(e,t)}),resolved:!1,exports:null},require(t)):s[t]={factory:null,resolved:!0,exports:r}},require=e.require=function(t){if(!s.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=s[t];if(!module.resolved){var r=[];module.deps.forEach(function(t){r.push(require(t))}),module.exports=module.factory.apply(e,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-jquery-treetable/treetable",["skylark-langx/skylark"],function(t){return t.attach("intg.treetable",{})}),t("skylark-jquery-treetable/Node",["skylark-jquery","./treetable"],function(t,e){function r(e,r,n){var i;this.row=e,this.tree=r,this.settings=n,this.id=this.row.data(this.settings.nodeIdAttr),null!=(i=this.row.data(this.settings.parentIdAttr))&&""!==i&&(this.parentId=i),this.treeCell=t(this.row.children(this.settings.columnElType)[this.settings.column]),this.expander=t(this.settings.expanderTemplate),this.indenter=t(this.settings.indenterTemplate),this.children=[],this.initialized=!1,this.treeCell.prepend(this.indenter)}return r.prototype.addChild=function(t){return this.children.push(t)},r.prototype.ancestors=function(){var t,e;for(e=this,t=[];e=e.parentNode();)t.push(e);return t},r.prototype.collapse=function(){return this.collapsed()?this:(this.row.removeClass("expanded").addClass("collapsed"),this._hideChildren(),this.expander.attr("title",this.settings.stringExpand),this.initialized&&null!=this.settings.onNodeCollapse&&this.settings.onNodeCollapse.apply(this),this)},r.prototype.collapsed=function(){return this.row.hasClass("collapsed")},r.prototype.expand=function(){return this.expanded()?this:(this.row.removeClass("collapsed").addClass("expanded"),this.initialized&&null!=this.settings.onNodeExpand&&this.settings.onNodeExpand.apply(this),t(this.row).is(":visible")&&this._showChildren(),this.expander.attr("title",this.settings.stringCollapse),this)},r.prototype.expanded=function(){return this.row.hasClass("expanded")},r.prototype.hide=function(){return this._hideChildren(),this.row.hide(),this},r.prototype.isBranchNode=function(){return this.children.length>0||!0===this.row.data(this.settings.branchAttr)},r.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch"),this.row.removeClass("leaf"),this.row.addClass(this.isBranchNode()?"branch":"leaf")},r.prototype.level=function(){return this.ancestors().length},r.prototype.parentNode=function(){return null!=this.parentId?this.tree[this.parentId]:null},r.prototype.removeChild=function(e){var r=t.inArray(e,this.children);return this.children.splice(r,1)},r.prototype.render=function(){var e,r,n=this.settings;return!0===n.expandable&&this.isBranchNode()&&(e=function(e){return t(this).parents("table").treetable("node",t(this).parents("tr").data(n.nodeIdAttr)).toggle(),e.preventDefault()},this.indenter.html(this.expander),(r=!0===n.clickableNodeNames?this.treeCell:this.expander).off("click.treetable").on("click.treetable",e),r.off("keydown.treetable").on("keydown.treetable",function(t){13==t.keyCode&&e.apply(this,[t])})),this.indenter[0].style.paddingLeft=this.level()*n.indent+"px",this},r.prototype.reveal=function(){return null!=this.parentId&&this.parentNode().reveal(),this.expand()},r.prototype.setParent=function(t){return null!=this.parentId&&this.tree[this.parentId].removeChild(this),this.parentId=t.id,this.row.data(this.settings.parentIdAttr,t.id),t.addChild(this)},r.prototype.show=function(){return this.initialized||this._initialize(),this.row.show(),this.expanded()&&this._showChildren(),this},r.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand(),this},r.prototype._hideChildren=function(){var t,e,r,n,i;for(n=this.children,i=[],e=0,r=n.length;e<r;e++)t=n[e],i.push(t.hide());return i},r.prototype._initialize=function(){var t=this.settings;return this.render(),!0===t.expandable&&"collapsed"===t.initialState?this.collapse():this.expand(),null!=t.onNodeInitialized&&t.onNodeInitialized.apply(this),this.initialized=!0},r.prototype._showChildren=function(){var t,e,r,n,i;for(n=this.children,i=[],e=0,r=n.length;e<r;e++)t=n[e],i.push(t.show());return i},e.Node=r}),t("skylark-jquery-treetable/Tree",["skylark-jquery","./treetable","./Node"],function(t,e,r){function n(t,e){this.table=t,this.settings=e,this.tree={},this.nodes=[],this.roots=[]}return n.prototype.collapseAll=function(){var t,e,r,n,i;for(n=this.nodes,i=[],e=0,r=n.length;e<r;e++)t=n[e],i.push(t.collapse());return i},n.prototype.expandAll=function(){var t,e,r,n,i;for(n=this.nodes,i=[],e=0,r=n.length;e<r;e++)t=n[e],i.push(t.expand());return i},n.prototype.findLastNode=function(t){return t.children.length>0?this.findLastNode(t.children[t.children.length-1]):t},n.prototype.loadRows=function(e){var n,i,s;if(null!=e)for(s=0;s<e.length;s++)null!=(i=t(e[s])).data(this.settings.nodeIdAttr)&&(n=new r(i,this.tree,this.settings),this.nodes.push(n),this.tree[n.id]=n,null!=n.parentId&&this.tree[n.parentId]?this.tree[n.parentId].addChild(n):this.roots.push(n));for(s=0;s<this.nodes.length;s++)n=this.nodes[s].updateBranchLeafClass();return this},n.prototype.move=function(e,r){var n=e.parentNode();return e!==r&&r.id!==e.parentId&&-1===t.inArray(e,r.ancestors())&&(e.setParent(r),this._moveRows(e,r),1===e.parentNode().children.length&&e.parentNode().render()),n&&n.updateBranchLeafClass(),e.parentNode()&&e.parentNode().updateBranchLeafClass(),e.updateBranchLeafClass(),this},n.prototype.removeNode=function(e){return this.unloadBranch(e),e.row.remove(),null!=e.parentId&&e.parentNode().removeChild(e),delete this.tree[e.id],this.nodes.splice(t.inArray(e,this.nodes),1),this},n.prototype.render=function(){var t,e,r;for(r=this.roots,t=0,e=r.length;t<e;t++)r[t].show();return this},n.prototype.sortBranch=function(t,e){return t.children.sort(e),this._sortChildRows(t),this},n.prototype.unloadBranch=function(t){var e,r=t.children.slice(0);for(e=0;e<r.length;e++)this.removeNode(r[e]);return t.children=[],t.updateBranchLeafClass(),this},n.prototype._moveRows=function(t,e){var r,n=t.children;for(t.row.insertAfter(e.row),t.render(),r=n.length-1;r>=0;r--)this._moveRows(n[r],t)},n.prototype._sortChildRows=function(t){return this._moveRows(t,t)},e.Tree=n}),t("skylark-jquery-treetable/jquery.treetable",["skylark-jquery","./treetable","./Node","./Tree"],function(t,e,r,n){var i={init:function(e,r){var i;return i=t.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",expandable:!1,expanderTemplate:"<a href='#'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"Expand",stringCollapse:"Collapse",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},e),this.each(function(){var e,s=t(this);return!r&&s.data("treetable")||((e=new n(this,i)).loadRows(this.rows).render(),s.addClass("treetable").data("treetable",e),null!=i.onInitialized&&i.onInitialized.apply(e)),s})},destroy:function(){return this.each(function(){return t(this).removeData("treetable").removeClass("treetable")})},collapseAll:function(){return this.data("treetable").collapseAll(),this},collapseNode:function(t){var e=this.data("treetable").tree[t];if(!e)throw new Error("Unknown node '"+t+"'");return e.collapse(),this},expandAll:function(){return this.data("treetable").expandAll(),this},expandNode:function(t){var e=this.data("treetable").tree[t];if(!e)throw new Error("Unknown node '"+t+"'");return e.initialized||e._initialize(),e.expand(),this},loadBranch:function(e,r){var n=this.data("treetable").settings,i=this.data("treetable").tree;if(r=t(r),null==e)this.append(r);else{var s=this.data("treetable").findLastNode(e);r.insertAfter(s.row)}return this.data("treetable").loadRows(r),r.filter("tr").each(function(){i[t(this).data(n.nodeIdAttr)].show()}),null!=e&&e.render().expand(),this},move:function(t,e){var r,n;return n=this.data("treetable").tree[t],r=this.data("treetable").tree[e],this.data("treetable").move(n,r),this},node:function(t){return this.data("treetable").tree[t]},removeNode:function(t){var e=this.data("treetable").tree[t];if(!e)throw new Error("Unknown node '"+t+"'");return this.data("treetable").removeNode(e),this},reveal:function(t){var e=this.data("treetable").tree[t];if(!e)throw new Error("Unknown node '"+t+"'");return e.reveal(),this},sortBranch:function(e,r){var n,i=this.data("treetable").settings;return r=r||i.column,n=r,t.isNumeric(r)&&(n=function(e,n){var i,s,a;return s=(i=function(e){var n=e.row.find("td:eq("+r+")").text();return t.trim(n).toUpperCase()})(e),a=i(n),s<a?-1:s>a?1:0}),this.data("treetable").sortBranch(e,n),this},unloadBranch:function(t){return this.data("treetable").unloadBranch(t),this}};return t.fn.treetable=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.treetable"):i.init.apply(this,arguments)},t}),t("skylark-jquery-treetable/main",["./treetable","./Node","./Tree","./jquery.treetable"],function(t,e,r){return t}),t("skylark-jquery-treetable",["skylark-jquery-treetable/main"],function(t){return t})}(r),!n){var a=require("skylark-langx/skylark");i?module.exports=a:e.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-jquery-treetable.js.map
