/**
 * skylark-jquery-treetable - A version of jquery-treetable that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jquery-treetable/
 * @license MIT
 */
define(["skylark-jquery","./treetable"],function(t,e){function i(e,i,n){var s;this.row=e,this.tree=i,this.settings=n,this.id=this.row.data(this.settings.nodeIdAttr),null!=(s=this.row.data(this.settings.parentIdAttr))&&""!==s&&(this.parentId=s),this.treeCell=t(this.row.children(this.settings.columnElType)[this.settings.column]),this.expander=t(this.settings.expanderTemplate),this.indenter=t(this.settings.indenterTemplate),this.children=[],this.initialized=!1,this.treeCell.prepend(this.indenter)}return i.prototype.addChild=function(t){return this.children.push(t)},i.prototype.ancestors=function(){var t,e;for(e=this,t=[];e=e.parentNode();)t.push(e);return t},i.prototype.collapse=function(){return this.collapsed()?this:(this.row.removeClass("expanded").addClass("collapsed"),this._hideChildren(),this.expander.attr("title",this.settings.stringExpand),this.initialized&&null!=this.settings.onNodeCollapse&&this.settings.onNodeCollapse.apply(this),this)},i.prototype.collapsed=function(){return this.row.hasClass("collapsed")},i.prototype.expand=function(){return this.expanded()?this:(this.row.removeClass("collapsed").addClass("expanded"),this.initialized&&null!=this.settings.onNodeExpand&&this.settings.onNodeExpand.apply(this),t(this.row).is(":visible")&&this._showChildren(),this.expander.attr("title",this.settings.stringCollapse),this)},i.prototype.expanded=function(){return this.row.hasClass("expanded")},i.prototype.hide=function(){return this._hideChildren(),this.row.hide(),this},i.prototype.isBranchNode=function(){return this.children.length>0||!0===this.row.data(this.settings.branchAttr)},i.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch"),this.row.removeClass("leaf"),this.row.addClass(this.isBranchNode()?"branch":"leaf")},i.prototype.level=function(){return this.ancestors().length},i.prototype.parentNode=function(){return null!=this.parentId?this.tree[this.parentId]:null},i.prototype.removeChild=function(e){var i=t.inArray(e,this.children);return this.children.splice(i,1)},i.prototype.render=function(){var e,i,n=this.settings;return!0===n.expandable&&this.isBranchNode()&&(e=function(e){return t(this).parents("table").treetable("node",t(this).parents("tr").data(n.nodeIdAttr)).toggle(),e.preventDefault()},this.indenter.html(this.expander),(i=!0===n.clickableNodeNames?this.treeCell:this.expander).off("click.treetable").on("click.treetable",e),i.off("keydown.treetable").on("keydown.treetable",function(t){13==t.keyCode&&e.apply(this,[t])})),this.indenter[0].style.paddingLeft=this.level()*n.indent+"px",this},i.prototype.reveal=function(){return null!=this.parentId&&this.parentNode().reveal(),this.expand()},i.prototype.setParent=function(t){return null!=this.parentId&&this.tree[this.parentId].removeChild(this),this.parentId=t.id,this.row.data(this.settings.parentIdAttr,t.id),t.addChild(this)},i.prototype.show=function(){return this.initialized||this._initialize(),this.row.show(),this.expanded()&&this._showChildren(),this},i.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand(),this},i.prototype._hideChildren=function(){var t,e,i,n,s;for(s=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],s.push(t.hide());return s},i.prototype._initialize=function(){var t=this.settings;return this.render(),!0===t.expandable&&"collapsed"===t.initialState?this.collapse():this.expand(),null!=t.onNodeInitialized&&t.onNodeInitialized.apply(this),this.initialized=!0},i.prototype._showChildren=function(){var t,e,i,n,s;for(s=[],e=0,i=(n=this.children).length;e<i;e++)t=n[e],s.push(t.show());return s},e.Node=i});
//# sourceMappingURL=sourcemaps/Node.js.map
