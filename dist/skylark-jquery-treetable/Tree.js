/**
 * skylark-jquery-treetable - A version of jquery-treetable that ported to running on skylarkjs ui.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jquery-treetable/
 * @license MIT
 */
define(["skylark-jquery","./treetable","./Node"],function(e,t,r){function n(e,t){this.table=e,this.settings=t,this.tree={},this.nodes=[],this.roots=[]}return n.prototype.collapseAll=function(){var e,t,r,n,o;for(o=[],t=0,r=(n=this.nodes).length;t<r;t++)e=n[t],o.push(e.collapse());return o},n.prototype.expandAll=function(){var e,t,r,n,o;for(o=[],t=0,r=(n=this.nodes).length;t<r;t++)e=n[t],o.push(e.expand());return o},n.prototype.findLastNode=function(e){return e.children.length>0?this.findLastNode(e.children[e.children.length-1]):e},n.prototype.loadRows=function(t){var n,o,s;if(null!=t)for(s=0;s<t.length;s++)null!=(o=e(t[s])).data(this.settings.nodeIdAttr)&&(n=new r(o,this.tree,this.settings),this.nodes.push(n),this.tree[n.id]=n,null!=n.parentId&&this.tree[n.parentId]?this.tree[n.parentId].addChild(n):this.roots.push(n));for(s=0;s<this.nodes.length;s++)n=this.nodes[s].updateBranchLeafClass();return this},n.prototype.move=function(t,r){var n=t.parentNode();return t!==r&&r.id!==t.parentId&&-1===e.inArray(t,r.ancestors())&&(t.setParent(r),this._moveRows(t,r),1===t.parentNode().children.length&&t.parentNode().render()),n&&n.updateBranchLeafClass(),t.parentNode()&&t.parentNode().updateBranchLeafClass(),t.updateBranchLeafClass(),this},n.prototype.removeNode=function(t){return this.unloadBranch(t),t.row.remove(),null!=t.parentId&&t.parentNode().removeChild(t),delete this.tree[t.id],this.nodes.splice(e.inArray(t,this.nodes),1),this},n.prototype.render=function(){var e,t,r;for(e=0,t=(r=this.roots).length;e<t;e++)r[e].show();return this},n.prototype.sortBranch=function(e,t){return e.children.sort(t),this._sortChildRows(e),this},n.prototype.unloadBranch=function(e){var t,r=e.children.slice(0);for(t=0;t<r.length;t++)this.removeNode(r[t]);return e.children=[],e.updateBranchLeafClass(),this},n.prototype._moveRows=function(e,t){var r,n=e.children;for(e.row.insertAfter(t.row),e.render(),r=n.length-1;r>=0;r--)this._moveRows(n[r],e)},n.prototype._sortChildRows=function(e){return this._moveRows(e,e)},t.Tree=n});
//# sourceMappingURL=sourcemaps/Tree.js.map
